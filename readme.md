## 简介

postoverlay是一个用于修改根文件系统（ext4）的脚本工具。

一般我们通过Buildroot的overlayfs机制来对根文件系统进行修改（覆盖），但是使用overlayfs存在一个构建的过程，有时我们希望直接对现有的根文件系统镜像进行修改，而不是每次都要重新进行构建。
考虑到根文件镜像文件一般为ext4格式，因此要完成这一任务存在一些比较简单的方法，大致的过程如下：
1. 将根文件系统镜像挂载到本地
2. 用本地文件覆盖根文件系统文件
3. 卸载根文件系统
这样就完成了根文件系统的更新。

postoverlay.py就是用于自动化上述过程工具，除此以外，postoverlay.py提供了一些更加高级的功能，比如在执行overylay前后在根文件系统环境下执行特定的脚本，这在某些场景下非常实用，比如
在将一些可执行文件拷贝到根文件系统后，使用脚本为这些文件增加执行权限。由于根文件系统镜像通常是不同构架的（arm），因此postoverlay.py依赖于QEMU仿真，请自行在本地机上安装相关工具。


## 构建本项目

```bash
python3 ./build.py
```

如果构建成功，会在dist/目录下生成一个名为`postoverlay-<版本号>-pyz`的可执行文件和一个安装脚本`install.sh`

执行安装脚本会将该可执行文件安装到`/usr/local/bin`目录下，并将其命名为`postoverlay`，如果`/usr/local/bin`路径在PATH环境变量中，那么用户可直接在命令行中输入`postoverlay`来使用该工具。


## 基本用法

